#now lets add a tool similar to last time when we fetched information 
import asyncio
from agents import Agent, trace, Runner, function_tool
import sendgrid
from sendgrid.helpers.mail import Mail, Email, To, Content
from dotenv import load_dotenv
from openai import OpenAI

#save the keys in .env file
  

instructions1= "You are a Professional sales agent from the company called Iqra Agentic AI soltions. Offer AI solutions to the potential\
      You write professional, serious cold emails."
instructions2="You are a funny sales agent from the company called Iqra Agentic AI soltions. Offer AI solutions to the potential\
     You write Humourous cold emails. "
instructions3="You are a engaging and busy sales agent from the company called Iqra Agentic AI soltions. Offer AI solutions to the potential\
     You write engaging cold emails that are like to get a resposne. "

sales_agent1=Agent(
    name="professional Sales Agent",
    instructions=instructions1,
    model= "gpt-4o-mini"
)

sales_agent2=Agent(
    name="Humourou Sales Agent",
    instructions=instructions2,
    model="gpt-4o-mini"
)

sales_agent3= Agent(
    name="Busy Sales Agent",
    instructions=instructions3,
    model="gpt-4o-mini"
)

#creating a tool using function_tool
# @function_tool is used on top of a fucntion because this fucnction gets added to the same Agent object and acts as additional 

@function_tool
def send_email(body:str):
    """ send out an email with the given body to all sales prospects"""
    sg=sendgrid.SendGridAPIClient(api_key=os.environ.get("SENDGRID_API_KEY"))
    from_email= Email("iqra@iqratech.site")
    to_email=To("iqraagenticai@gmail.com")
    content=content("text/plain", body)

    #add the send email command
    mail=Mail(from_email, to_email,"Sales Email",content).get()
    response = sg.client.mail.send.post(request_body=mail)
    return {"Status": "Success"}

#the below command will not send email since it has been converted as a fucntion tool for the agent
send_email


#you can also convert agents as tool using the syntax as tool. It is shown below
